"use strict";var model={locations:[{name:"Cohaesus Projects Ltd",lat:"51.524288",lng:"-0.096178",about:"The office. You work here."},{name:"The Fountain",lat:"51.526938",lng:"-0.088713",about:"Local pub. Good beer selection."},{name:"Old Street Market",lat:"51.523658",lng:"-0.093210",about:"Great place for lunch."},{name:"Finsbury Leisure Centre",lat:"51.526212",lng:"-0.095253",about:"Local gym / fitness centre."},{name:"Vibast Community Centre",lat:"51.525467",lng:"-0.092290",about:"Conducts Salah"}]},viewModel={getMarkers:function(){return model.locations},init:function(){function e(e){var n=new RegExp(t.currentSearch(),"i");return n.exec(e.name)||n.exec(e.about)}var t=this,n=this.getMarkers();this.items=ko.observableArray(),this.currentSearch=ko.observable(""),this.filteredItems=ko.computed(function(){return t.items().filter(e)}),markerView.init(),mapView.init(),this.items(n)}},markerView={init:function(){this.pointOfInterest=document.getElementById("poi-list")}},mapView={init:function(){this.mapElem=document.getElementById("map"),this.render()},render:function(){var e=this;this.mapOldSt={center:new google.maps.LatLng(51.524288,-.096178),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP},this.mapElem=new google.maps.Map(document.getElementById("map"),this.mapOldSt);var t=[];viewModel.filteredItems.subscribe(function(n){t.forEach(function(e){e.setMap(null)}),t=n.map(function(t){var n={animation:google.maps.Animation.DROP,position:new google.maps.LatLng(t.lat,t.lng)},o=new google.maps.Marker(n);return o.setMap(e.mapElem),google.maps.event.addListener(o,"click",function(){e.toggleBounce(o),e.infoWindow(t,o)}),o})}),this.toggleBounce=function(e){null!==e.getAnimation()?e.setAnimation(null):e.setAnimation(google.maps.Animation.BOUNCE)},this.infoWindow=function(t,n){var o={content:t.about},i=new google.maps.InfoWindow(o);i.open(e.mapElem,n)}}};viewModel.init(),ko.applyBindings(viewModel);